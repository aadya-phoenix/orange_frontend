<div id="right-panel" class="right-panel">
    <app-header></app-header>
    <div class="breadcrumbs cm_breadcums">
        <div class="col-sm-8">
            <div class="page-header float-left">
                <div class="page-title d-flex align-items-center">
                    <img src="../../../../assets/images/second.jpg" class="home_Css_img" />
                    <div class="d-flex flex-column ml-3">
                        <span class="breade_text_span1">Create new session </span>
                        <span class="divider"></span>
                        <span class="breade_text_span">Request the creation of one or more sessions in Orange Learning.</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="page-header float-right">
                <div class="page-title d-flex end_just">
                    <ol class="breadcrumb text-right">
                        <li>
                            <a [routerLink]="['/dashboard']" class="text_white">
                                <i class="fa fa-home"></i>
                            </a>
                        </li>
                        <li>
                            <a [routerLink]="['/dashboard']" class="text_white">Dashboard</a>
                        </li>
                        <li>
                            <a [routerLink]="['/dashboard/sct']" class="text_white">Create new Session</a>
                        </li>
                        <li>
                            <a  class="text_white">New request</a>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="card_header_common">
        <div class="d-flex justify-content-between media_creat_couse_col">
            <div class="d-flex align-items-center">

                <img src="../../../../assets/images/formm.png" class="form_img_req" />
                <p class="mt-2 ml-2 mb-2 view-re_css">
                <span>Complete this form and click on the submit button</span>
            </p>
            </div>
            <a class="float-right view_overall" data-toggle="collapse" href="#collapseExample"
                role="button" aria-expanded="false" aria-controls="collapseExample">
                View overall request status<img src="../../../../assets/images/Viewreq.png"
                    class="ml-2 w_40" />
            </a>
        </div>
    </div>
</div>
<form [formGroup]="createSessionForm" enctype="multipart/form-data">
    <div class="content mt-1">
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-md-12">
                    <p class="indicate_css"><span class="text_red">*</span>Indicates required field</p>
                    <div class="card">
                        <div class="card-body card_width">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="form-control-label">
                                            Event Title <span class="text_red">* </span>
                                            <a>
                                                <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                data-bs-toggle="tooltip" placement="right"
                                                ngbTooltip="Provide the course name as it appears in the Orange Learning catalog.">
                                                </i>
                                            </a>
                                        </label>
                                        <input type="text" class="form-control form_width"
                                            placeholder="Enter Event Title" formControlName="title">
                                         <div
                                             *ngIf="(createSessionForm.controls['title'].invalid && (createSessionForm.controls['title'].dirty || createSessionForm.controls['title'].touched)) || isSubmitted">
                                             <div class="error_message"
                                                 *ngIf="createSessionForm.controls['title'].errors?.required">
                                                 Event Title cannot be blank
                                             </div>
                                         </div>
        
                                    </div>
                                </div>
                                <!--col-->
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="form-control-label">
                                            Select your region <span class="text_red">* </span>
                                        </label>
                                        <ng-select placeholder="Please Select Region" [items]="rocObj" bindLabel="name" [readonly]="session_status =='pending'"
                                            bindValue="id" formControlName="region_id" class="w_100">
                                        </ng-select>
                                        <div
                                              *ngIf="(createSessionForm.controls['region_id'].invalid && (createSessionForm.controls['region_id'].dirty || createSessionForm.controls['region_id'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="createSessionForm.controls['region_id'].errors?.required">
                                                  Region cannot be blank
                                              </div>
                                             </div>
                                        
                                        <p class="text_black" *ngFor="let item of backupCordinatorsList">
                                            <b class="text_orange">Note</b>: The training coordinator of {{item.name}}
                                            region is unavaliable.Therefore, please select the
                                            <b class="text_orange">{{item.backup_roc_region}}</b>.region from the list,
                                            who is the backup for {{item.name}} region.
                                        </p>
                                    </div>
                                </div>
                                <!--col-->
                            </div>
                        </div>
                      
                    </div>
                    
                    <ng-container *ngIf="metadataArray.controls.length > 0">
                        <div class="card" formArrayName="metadata" *ngFor="let session of metadataArray.controls; let i = index">
                            <div class="card-header">
                                <div class="heeader_button">
                                    <strong _ngcontent-jet-c125=""> Sessions:{{i+1}} </strong>
                                    <div class="button_div">
                                        <button (click)="copySession(session)" class="btn btn-primary btn_creat_session1 mr-1"><span class="fon_12">Copy Session</span>
                                        </button>
                                        <button (click)="addMetadata()" class="btn btn-info btn_creat_session1 mr-1"><span class="fon_12">Add the Session </span>
                                        </button>
                                        <button *ngIf="i > 0" (click)="removeMetadata(i)" class="btn btn-danger btn_creat_session1"><span class="fon_12">Remove</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div [formGroupName]="i" class="card-body card_width">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Delivery Method <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="The delivery method selected will apply to all sessions detailed below.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select Delivery method"
                                                [items]="deliveryMethod" bindLabel="name" bindValue="id"
                                                formControlName="delivery_method" class="w_100">
                                            </ng-select>
                                            <div
                                             *ngIf="(metadataArray.controls[i].controls['delivery_method'].invalid && (metadataArray.controls[i].controls['delivery_method'].dirty || metadataArray.controls[i].controls['delivery_method'].touched)) || isSubmitted">
                                             <div class="error_message"
                                                 *ngIf="metadataArray.controls[i].controls['delivery_method'].errors?.required">
                                                 Delivery Method cannot be blank
                                             </div>
                                         </div>
                                           
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Country <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please select the country.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select Country" [items]="countryObj"
                                                bindLabel="country_name" bindValue="id" formControlName="country"
                                                class="w_100">
                                            </ng-select>
                                            <div
                                             *ngIf="(metadataArray.controls[i].controls['country'].invalid && (metadataArray.controls[i].controls['country'].dirty || metadataArray.controls[i].controls['country'].touched)) || isSubmitted">
                                             <div class="error_message"
                                                 *ngIf="metadataArray.controls[i].controls['country'].errors?.required">
                                                 Country cannot be blank
                                             </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Location
                                            </label>
                                            <input type="text" class="form-control form_width"
                                                placeholder="Enter Location" formControlName="location">
                                             <div
                                             *ngIf="(metadataArray.controls[i].controls['location'].invalid && (metadataArray.controls[i].controls['location'].dirty || metadataArray.controls[i].controls['location'].touched)) || isSubmitted">
                                             <div class="error_message"
                                                 *ngIf="metadataArray.controls[i].controls['location'].errors?.required">
                                                 Location cannot be blank
                                             </div>
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Instructor Name
                                            </label>
                                            <input type="text" class="form-control form_width"
                                                placeholder="Enter Instructor Name" formControlName="instructor_name">
                                            <div
                                              *ngIf="(metadataArray.controls[i].controls['instructor_name'].invalid && (metadataArray.controls[i].controls['instructor_name'].dirty || metadataArray.controls[i].controls['instructor_name'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['instructor_name'].errors?.required">
                                                  Instructor Name cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Email ID of participants <span class="text_red">* </span>
                                            </label>

                                            <ng-select placeholder="Please select Instructor"
                                                [items]="preferedInstructor" [multiple]="true" bindLabel="email_id"
                                                bindValue="email_id" formControlName="email_participant">
                                            </ng-select>
                                            <div
                                              *ngIf="(metadataArray.controls[i].controls['email_participant'].invalid && (metadataArray.controls[i].controls['email_participant'].dirty || metadataArray.controls[i].controls['email_participant'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['email_participant'].errors?.required">
                                                  Email ID of participants cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Start Date<span class="text_red">* </span>
                                            </label>
                                            <input type="date" class="form-control form_width"
                                                formControlName="start_date" min="{{minStartDate}}">
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['start_date'].invalid && (metadataArray.controls[i].controls['start_date'].dirty || metadataArray.controls[i].controls['start_date'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['start_date'].errors?.required">
                                                  Start Date cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Start Time<span class="text_red">* </span>
                                            </label>
                                              <!--  <input [ngxTimepicker]="picker">
                                               <ngx-material-timepicker></ngx-material-timepicker>  -->
                                             <!--  <ngx-timepicker-field formControlName="start_time" [controlOnly]="true"></ngx-timepicker-field>  -->
                                             <!-- <ngb-timepicker formControlName="start_time" [meridian]="meridian"></ngb-timepicker> -->  
                                              <input type="time" class="form-control form_width"
                                                formControlName="start_time">   
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['start_time'].invalid && (metadataArray.controls[i].controls['start_time'].dirty || metadataArray.controls[i].controls['start_time'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['start_time'].errors?.required">
                                                  Start Time cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                End Date<span class="text_red">* </span>
                                            </label>
                                            <input type="date" class="form-control form_width"
                                                formControlName="end_date" [min]="metadataArray.controls[i].controls['start_date'].value">
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['end_date'].invalid && (metadataArray.controls[i].controls['end_date'].dirty || metadataArray.controls[i].controls['end_date'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['end_date'].errors?.required">
                                                  End Date cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                End Time<span class="text_red">* </span>
                                            </label>
                                            <input type="time" class="form-control form_width"
                                                formControlName="end_time">
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['end_time'].invalid && (metadataArray.controls[i].controls['end_time'].dirty || metadataArray.controls[i].controls['end_time'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['end_time'].errors?.required">
                                                  End Time cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Time Zone
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate the time zone of the instructor.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select Country" [items]="timeZoneObj"
                                                bindLabel="name" bindValue="id" formControlName="time_zone"
                                                class="w_100">
                                            </ng-select>
                                        </div>
                                    </div>
                                    <!--col-->
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table  formArrayName="break" class="table table-bordered">
                                            <thead *ngFor="let item of session.controls.break.controls; let idx = index;">
                                                <tr >
                                                    <th scope="col">Break Description</th>
                                                    <th scope="col">Break Duration</th>
                                                    <th scope="col" class="w_add">Add</th>
                                                </tr>
                                                <tr >
                                                    <td [formGroupName]="idx"  class="d-flex">
                                                        <textarea formControlName="description"
                                                            class="form-control form_width-textarea w-100 mr-2" rows="3"
                                                            placeholder="Enter Description"></textarea>
                                                    </td>
                                                    <td [formGroupName]="idx"> <input type="time"
                                                            class="form-control form_width" formControlName="duration">
                                                    </td>
                                                    <!-- (keyup)="numbersOnly($event,i,idx)" -->
                                                    <td>
                                                        <button (click)="addBreak(i)" class="btn btn-primary btn_creat_session mb-1">
                                                           <span class="fon_12"> Add Break </span></button>
                                                        <button  *ngIf="idx > 0" (click)="removeBreak(i,idx)" class="btn btn-secondary btn_creat_session">
                                                            <span class="fon_12"> Remove Break </span>   
                                                        </button>
                                                    </td>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                    <!--col-->
                                </div>
                                <!--row-->
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Comments
                                            </label>
                                            <textarea class="form-control form_width-textarea" rows="3"
                                                formControlName="comment"></textarea>
                                        </div>
                                    </div>
                                    <!--col-->
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Minimum Registration <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate the minimum number of participants required for the session to take place.">
                                                    </i>
                                                </a>
                                            </label>
                                            <input type="text" class="form-control form_width"
                                                placeholder="Enter Minimum Registration "
                                                formControlName="min_registration" digitOnly>
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['min_registration'].invalid && (metadataArray.controls[i].controls['min_registration'].dirty || metadataArray.controls[i].controls['min_registration'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['min_registration'].errors?.required">
                                                  Minimum Registration cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Maximum Registration <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate the maximum number of participants allowed to register on the session.">
                                                    </i>
                                                </a>
                                            </label>
                                            <input type="text" class="form-control form_width"
                                                placeholder="Enter Maximum Registration "
                                                formControlName="max_registration" digitOnly>
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['max_registration'].invalid && (metadataArray.controls[i].controls['max_registration'].dirty || metadataArray.controls[i].controls['max_registration'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['max_registration'].errors?.required">
                                                  Maximum Registration cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Registration Deadline<span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="top" title="">
                                                    </i>
                                                </a>
                                            </label>
                                            <input type="date" class="form-control form_width"
                                                formControlName="registration_deadline">
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['registration_deadline'].invalid && (metadataArray.controls[i].controls['registration_deadline'].dirty || metadataArray.controls[i].controls['registration_deadline'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['registration_deadline'].errors?.required">
                                                  Registration Deadline cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    </div><!--rowend-->
                                    <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Availability <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate if the session should be restricted to a specific target audience: e.g. employees in a specific location, specific business unit, specific users.">
                                                    </i>
                                                </a>
                                            </label>
                                            <textarea class="form-control form_width-textarea" rows="3"
                                                formControlName="availability"></textarea>
                                                <div
                                              *ngIf="(metadataArray.controls[i].controls['availability'].invalid && (metadataArray.controls[i].controls['availability'].dirty || metadataArray.controls[i].controls['availability'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['availability'].errors?.required">
                                                  Availability cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Manager Approval
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate if learners require manager approval to register for this session.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select" [items]="yesNo" bindLabel="name"
                                                bindValue="id" formControlName="manager_approval" class="w_100">
                                            </ng-select>
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="w_100">

                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                External vendor <span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="right"
                                                        ngbTooltip="Please indicate if the session is delivered by an external training provider.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select" [items]="yesNo" bindLabel="name" (change)="externalVendor($event,i)"
                                                bindValue="id" formControlName="external_vendor" class="w_100">
                                            </ng-select>
                                            <div
                                              *ngIf="(metadataArray.controls[i].controls['external_vendor'].invalid && (metadataArray.controls[i].controls['external_vendor'].dirty || metadataArray.controls[i].controls['external_vendor'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['external_vendor'].errors?.required">
                                                  External vendor cannot be blank
                                              </div>
                                             </div>
                                            
                                        </div>
                                    </div>
                                    <!--col-->
                                    <div class="col-sm-6" *ngIf="metadataArray.controls[i].controls['external_vendor'].value =='yes'">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                External vendor name<span class="text_red">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="top"
                                                        title="Please indicate if the session is delivered by an external training provider.">
                                                    </i>
                                                </a>
                                            </label>
                                            <ng-select placeholder="Please select" [items]="vendor"
                                                bindLabel="vendor_name" bindValue="vendor_name"
                                                formControlName="external_vendor_name" class="w_100">
                                            </ng-select>
                                            <div
                                              *ngIf="(metadataArray.controls[i].controls['external_vendor_name'].invalid && (metadataArray.controls[i].controls['external_vendor_name'].dirty || metadataArray.controls[i].controls['external_vendor_name'].touched)) || isSubmitted">
                                              <div class="error_message"
                                                  *ngIf="metadataArray.controls[i].controls['external_vendor_name'].errors?.required">
                                                  External vendor name cannot be blank
                                              </div>
                                             </div>
                                           
                                        </div>
                                    </div>
                                    <!--col-->
                                    </div><!--w_100-->
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Training cost per participant
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-toggle="tooltip" data-placement="left"
                                                        ngbTooltip="Training delivered by Orange instructors has a standard cost of 20 Euros per hour per participant. Example: A course with the duration of 7 hours will have a training cost of 140 Euros.
                                                    The cost of training delivered by an external instructor will be advertised as a cost per participant on the basis of 10 participants per session. The final cost will vary according to the number of participants.
                                                    Example: A session costing a total of 2000 Euros will be advertised as a cost of 200 Euros per participant. If the final number of participants is 8, the final cost per participant will be 250 Euros. If the final number of participants is 12, the final cost per participant will be 166,50 Euros.
                                                    Your Training Coordinator will update training costs on Orange Learning if required.">
                                                    </i>
                                                </a>
                                            </label>
                                            <div class="dollar_div">
                                            <label>â‚¬</label>
                                              <input type="text"  formControlName="training_cost">
                                              </div>                                              
                                               <p class="text_black">
                                                    <b class="text_orange">Note</b>The training cost will not be displayed on the course page in the Orange Learning catalog.
                                                    The training cost will only be displayed in the corresponding session(s) of the course.
                                                </p>

                                        </div>
                                    </div>
                                    <!--col-->
                                   
                                  
                                </div>
                                <!--row-->
                            </div>
                           
                        </div>
                        <div class="card-footer1" *ngIf ="getUserrole.id == 2">
                            <button class="btn btn-primary mr-1" type="submit"
                                (click)="createSession('pending')">Submit</button>
                            <button class="btn btn-secondary" *ngIf=" session_status != 'reject'" (click)="createSession('draft')">
                                Save as draft
                            </button>
                        </div>
                         <div class="card-footer1" *ngIf ="getUserrole.id == 3">
                            <button *ngIf="(sessionPub || session_status == 'reject') && session_status !='pending'" class="btn btn-primary mr-1" type="submit"
                            (click)="createSession('pending')">Submit</button>
                            <button *ngIf="(!sessionPub && session_status != 'reject') || session_status == 'pending' " class="btn btn-primary mr-1" data-target="#publishModal" data-toggle="modal">  <i class="fa fa-upload" aria-hidden="true"></i>
                                <span class="pl-1"> Publish</span></button>
                            <button *ngIf="session_id == 0 || sessionPub && session_status != 'pending' || session_status == 'draft'" class="btn btn-secondary" (click)="createSession('draft')">
                                Save as draft
                            </button>
                            <!-- <button *ngIf="session_id != 0 && (!sessionPub || session_status == 'pending') && (session_status != 'draft' && session_status != 'reject')" class="btn btn-secondary" data-target="#rejectModal" data-toggle="modal" >
                                <i class="fa fa-times" aria-hidden="true"></i> <span
                                        class="pl-1">Reject</span>
                            </button> -->
                            <button *ngIf="(session_id != 0 && session_status == 'pending')" class="btn btn-secondary" data-target="#rejectModal" data-toggle="modal" >
                                <i class="fa fa-times" aria-hidden="true"></i> <span
                                        class="pl-1">Reject</span>
                            </button>
                        </div> 
                        <div class="card-footer1" *ngIf ="getUserrole.id == 9">
                            <button class="btn btn-primary mr-1" type="submit"
                                 data-target="#publishModal" data-toggle="modal">Publish</button>
                                <button *ngIf="session_id == 0" class="btn btn-secondary" (click)="createSession('draft')">
                                    Save as draft
                                </button>
                            <button *ngIf="session_id != 0" class="btn btn-secondary" data-toggle="modal" data-target="#rejectModal">
                                <i class="fa fa-times" aria-hidden="true"></i> <span
                                        class="pl-1">Reject</span>
                            </button>
                        </div> 
                    </ng-container>
                   
                </div>
            </div>
        </div>
    </div>
</form>

<div class="modal fade mar_top_150" id="publishModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
   >
    <div class="modal-dialog modal-lg" role="document ">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="reject_req_h4">Publish Request</h4>
        </div>

        <div class="modal-body">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label>Comments</label>
                  <textarea class="form-control form_width-textarea" rows="3" placeholder="Enter Comments" [(ngModel)]="publishComment"></textarea>
                </div>
              </div>
            </div>
            <!--row-->
        </div>
        <div class="modal-footer">
          <!-- <button type="button " class="btn btn-secondary " data-dismiss="modal ">Close</button> -->
          <button type="button" class="btn btn-primary btn_requst" data-dismiss="modal" (click)="createSession('publish')">
            Submit
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade mt_150" id="rejectModal" tabindex="-1" aria-labelledby="exampleModalLabel"   aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document ">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="reject_req_h4">Reject Request</h4>
        </div>

        <div class="modal-body">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <label>Comments</label>
                <textarea class="form-control form_width-textarea" rows="3" placeholder="Enter Comments"
                  [(ngModel)]="rejectcomment"></textarea>
              </div>
            </div>
            <!--col end-->
          </div>
          <!--row-->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="reject()">
            Submit
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>

<div class="collapse" id="collapseExample">
    <div class="card card-body req_status-card">
        <div class="card_header reqst_header">
            <p>Overall request Status</p>
            <i class="fa fa-times fa_cross mr-2" aria-hidden="true" data-toggle="collapse" href="#collapseExample"
                role="button" aria-expanded="false" aria-controls="collapseExample"></i>
        </div>
        <div class="row ml-1 mr-1" data-aos="fade-right">
            <div class="col-sm-2 dash_wid">
                <div class="alig_dashicon">
                    <div class="child_align_icon">
                        <div class="fa-icons-des bac_trasparent">
                            <img src="../../../../assets/images/icon/draftsbl.png" />
                        </div>

                        <p>Draft</p>
                        <span class="number_css">
                            {{
                            session_count.draft
                            }}
                        </span>
                    </div>
                </div>
            </div>
            <!--coled-->
            <div class="col-sm-2 dash_wid">
                <div class="alig_dashicon">
                    <div class="child_align_icon">
                        <div class="fa-icons-des bac_trasparent">
                            <img src="../../../../assets/images/icon/closedbl.png" />
                        </div>

                        <p>Submitted</p>
                        <span class="number_css">
                            {{
                            session_count.submitted
                            }}
                        </span>
                    </div>
                </div>
            </div>
            <!--coled-->
            <div class="col-sm-2 dash_wid">
                <div class="alig_dashicon">
                    <div class="child_align_icon">
                        <div class="fa-icons-des bac_trasparent">
                            <img src="../../../../assets/images/icon/pendingbl.png" />
                        </div>

                        <p>Pending</p>
                        <span class="number_css">
                            {{
                            session_count.pending
                            }}
                        </span>
                    </div>
                </div>
            </div>
            <!--coled-->
            <div class="col-sm-2 dash_wid">
                <div class="alig_dashicon">
                    <div class="child_align_icon">
                        <div class="fa-icons-des bac_trasparent">
                            <img src="../../../../assets/images/icon/checkbl.png" />
                        </div>

                        <p>Published</p>
                        <span class="number_css">
                            {{
                            session_count.closed
                            }}
                        </span>
                    </div>
                </div>
            </div>
            <!--coled-->
            <div class="col-sm-2 dash_wid">
                <div class="alig_dashicon">
                    <div class="child_align_icon">
                        <div class="fa-icons-des bac_trasparent">
                            <img src="../../../../assets/images/icon/rejectbl.png" />
                        </div>

                        <p>Rejected</p>
                        <span class="number_css">
                            {{
                            session_count.rejected
                            }}
                        </span>
                    </div>
                </div>
            </div>
            <!--coled-->
        </div>
        <!--ROW END-->
    </div>
</div>