<div id="right-panel" class="right-panel">
    <app-header></app-header>
    <div class="breadcrumbs cm_breadcums">
        <div class="col-sm-7">
          <div class="page-header float-left">
            <div class="page-title d-flex align-items-center">
              <img src="../../../../assets/images/second.jpg" class="home_Css_img" />
              <div class="d-flex flex-column ml-3">
                <span class="breade_text_span1">Open Course Session </span>
                <span class="divider"></span>
                <span class="breade_text_span">Request the creation of one or more sessions in Orange Learning.</span>
              </div>
            </div>
          </div>
        </div>
    
        <div class="col-sm-5 float-right">
          <div class="page-header float-right">
            <div class="page-title d-flex end_just">
              <ol class="breadcrumb text-right">
                <li>
                  <a href="# " class="text_white">
                    <i class="fa fa-home"></i>
                  </a>
                </li>
                <li>
                  <a [routerLink]="['/dashboard']" class="text_white">Dashboard</a>
                </li>
                <li>
                  <a [routerLink]="['/dashboard']" class="text_white">Create new Session</a>
                </li>
                <li>
                  <a class="text_white">View</a>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    <div class="card_header_common">
        <div class="d-flex align-items-center justify_content">
          <div class="d-flex">
            <img src="../../../../assets/images/formm.png" class="ml-2 form_img_req" />
            <p class="mt-2 ml-2 mb-2 view-re_css">
              <span>View Session Request</span>
              <span class="cc-text_css">({{ sessiondata.request_id }}) -
              </span>
              <span>
                Request Status - {{ status | titlecase
                }}
              </span>
            
            </p>
          </div>
  
        </div>
      </div>
   
    <div class="content">
        <div class="animated fadeIn">
             <div *ngIf ="getUserrole.id == 2 && (status == 'reject' || status == 'draft') || status == 'draft'"     class="mb-2">
              
                    <div class="Requs_btn_inl">
                        <div class="Requs_btn_inl-child">
                            <button class="btn btn-primary" (click)="updateSession()">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span class="pl-1">Update</span>
                              </button>
                        </div>
                    </div>
               
            </div> 
            <div *ngIf ="getUserrole.id == 3 && status_show =='pending'" class="mb-2">
               
                    <div class="Requs_btn_inl">
                        <div class="Requs_btn_inl-child">
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#publishModal"
                              *ngIf="status != 'publish'">
                              <i class="fa fa-upload" aria-hidden="true"></i><span class="pl-1">Publish</span>
                            </button>
                            <button class="btn btn-secondary ml-2" (click)="updateSession()">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span class="pl-1">Update</span>
                          </button>
                          <button type="button" class="btn btn-secondary ml-2" data-toggle="modal"
                            data-target="#rejectModal">
                            <i class="fa fa-times" aria-hidden="true"></i> <span class="pl-1">Reject</span>
                          </button>
                         
                        </div>  
                        <div class="Requs_btn_inl-child1">
                            <button type="button" class="btn btn-secondary ml-2" data-toggle="modal"
                            data-target="#transferotherRoc" (click)="getCordinators()">
                            <i class="fa fa-exchange" aria-hidden="true"></i><span class="pl-1">Transfer to Other ROC</span>
                        </button>
                            </div>                          
                    </div>
                
            </div>
            <div *ngIf ="getUserrole.id == 9 && status =='pending'" class="card">
                <div class="card-body">
                    <div class="Requs_btn_inl">
                        <div class="Requs_btn_inl-child">
                            <button type="button" class="btn btn-primary  ml-2" data-toggle="modal" data-target="#publishModal"
                              *ngIf="status != 'publish'">
                              <i class="fa fa-upload" aria-hidden="true"></i><span class="pl-1">Publish</span>
                            </button>
                            <button class="btn btn-secondary ml-2" (click)="updateSession()">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span class="pl-1">Update</span>
                          </button>
                          <button type="button" class="btn btn-secondary ml-2" data-toggle="modal"
                            data-target="#rejectModal">
                            <i class="fa fa-times" aria-hidden="true"></i> <span class="pl-1">Reject</span>
                          </button>
                        </div>                            
                    </div>
                </div>
            </div>
            <div class="row mb-3">
              <div class="col-sm-6">
                <div class="card border-radius-0">
                    <div class="card-header card_header_view">
                        <p>Session Details</p>
                    </div>
                    <div class="card-body">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Title</label>
                                <div class="d-flex align-items-center">
                                    <span class="form_data">
                                        {{ sessiondata.title }}
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Region</label>
                                <div class="d-flex align-items-center">
                                    <span class=" form_data">
                                        {{ sessiondata.region_name }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <div class="col-sm-6">
                    <ngb-accordion #acc="ngbAccordion" *ngFor="let meta of sessiondata.metadata; let i = index">
                        <ngb-panel>
                            <ng-template ngbPanelTitle>
                                <span>Session: {{i+1}}</span>
                            </ng-template>
                            <ng-template ngbPanelContent>
                                <div class="card-body p-2">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Delivery Method</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.delivery_method_name}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Country</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.country_name}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Location</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.location}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Instructor Name</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.instructor_name}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Email Id of Participants</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                <span *ngFor="let item of meta.email" >
                                                    {{item}}
                                                </span>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Start Date</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.start_date}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Start Time</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.start_time}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">End Date</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.end_date}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">End Time</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.end_time}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
            
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">TimeZone</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.time_zone_name}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Break Description</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                <span *ngFor="let item of meta.break_data" >
                                                    {{item.description}}
                                                </span>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Break Duration</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">                         
                                                <span *ngFor="let item of meta.break_data" >
                                                    {{item.duration}}
                                                </span>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Comments</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.comment}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Minimum Registration</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.min_registration}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Maximum Registration</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.max_registration}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Registration Deadline</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.registration_deadline}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Availability</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.availability}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Manager Approval</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.manager_approval}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">External vendor</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                    {{meta.external_vendor}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="meta.external_vendor_name" class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">External vendor name</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">
                                                    {{meta.external_vendor_name}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">Training cost per participant</label>
                                            <div class="d-flex align-items-center">
                                                <span class="form_data">  
                                                  {{meta.training_cost_euro}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </ng-template>
                        </ngb-panel>
                    </ngb-accordion>
</div>          
               
                    
 </div>
        </div>
       
    </div>

    <div class="modal fade mar_top_150" id="publishModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
   >
    <div class="modal-dialog modal-lg" role="document ">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="reject_req_h4">Publish Request</h4>
        </div>

        <div class="modal-body">
          <form [formGroup]="publishForm">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label>Comments</label>
                  <textarea class="form-control form_width-textarea" formControlName="status_comment" rows="3" placeholder="Enter Comments"></textarea>
                </div>
              </div>
              <!--col end-->
             <!--  <div class="col-sm-12">
                <div class="form-group">
                  <label>Orange Learning Intranet URL(SSO)</label>
                  <input type="text" placeholder="Enter Orange Learning Intranet URL(SSO)"
                    class="form-control form_width1" formControlName="intranet_url" />
                  <div class="error_message"
                    *ngIf="publishForm.controls['intranet_url'].invalid && (publishForm.controls['intranet_url'].dirty || publishForm.controls['intranet_url'].touched)">
                    Orange Learning Intranet URL is not a valid URL</div>
                </div>
              </div> -->
              <!--col end-->
             <!--  <div class="col-sm-12">
                <div class="form-group">
                  <label>Orange Learning Internet URL</label>
                  <input type="text" class="form-control form_width1" placeholder="Enter Orange Learning Internet URL"
                    formControlName="internet_url" />
                  <div class="error_message"
                    *ngIf="publishForm.controls['internet_url'].invalid && (publishForm.controls['internet_url'].dirty || publishForm.controls['internet_url'].touched)">
                    Orange Learning Internet URL is not a valid URL</div>
                </div>
              </div> -->
              <!--col end-->
            </div>
            <!--row-->
          </form>
        </div>
        <div class="modal-footer">
          <!-- <button type="button " class="btn btn-secondary " data-dismiss="modal ">Close</button> -->
          <button type="button" class="btn btn-primary btn_requst" data-dismiss="modal" (click)="publishRequest()">
            Submit
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

    <div class="modal fade mt_150" id="rejectModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document ">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="reject_req_h4">Reject Request</h4>
            </div>
    
            <div class="modal-body">
              <div class="row">
                <div class="col-sm-12">
                  <div class="form-group">
                    <label>Comments</label>
                    <textarea class="form-control form_width-textarea" rows="3" placeholder="Enter Comments"
                      [(ngModel)]="rejectcomment"></textarea>
                  </div>
                </div>
                <!--col end-->
              </div>
              <!--row-->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="reject()">
                Submit
              </button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade mar_top_150" id="transferotherRoc" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
      >
      <div class="modal-dialog modal-lg" role="document ">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="reject_req_h4">
              Transfer the requet to other ROC
            </h4>
          </div>
  
          <div class="modal-body">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label>Regional Operation Coordinator</label>
                  <select class="form-control form_width1" (change)="getRoc($event)">
                    <option hidden disabled selected='selected'>Regional Operation Coordinator</option>
                    <option *ngFor="let cordinator of cordinatorsList" [value]="cordinator.id">
                      {{ cordinator?.name }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-sm-12">
                <div class="form-group">
                  <label>Comment</label>
                  <textarea class="form-control form_width-textarea" rows="3" placeholder="Enter Comments"
                    [(ngModel)]="transfercomment"></textarea>
                </div>
              </div>
              <!--col end-->
            </div>
            <!--row-->
          </div>
          <div class="modal-footer">
            <button type="button" data-dismiss="modal" (click)="transfertoOtherRoc()" class="btn btn-primary btn_requst">
              Submit
            </button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
</div>