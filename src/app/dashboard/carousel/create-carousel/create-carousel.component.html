<div id="right-panel" class="right-panel">
    <app-header></app-header>
    <div class="breadcrumbs cm-breadcrumbs">
        <div class="col-sm-7">
            <div class="page-header float-left bg-transparent">
                <div class="page-title d-flex align-items-center">
                    <img src="../../../../assets/images/creatnew.png" class="home_Css_img" />
                    <div class="d-flex flex-column ml-3">
                        <span class="font-20">Promote on Carousel</span>
                        <span class="divider"></span>
                        <span class="title-detail mt-6">
                            <b>Instructor-Led (ILT)</b> - Instructor-Led
                            Training is face to face training delivered in a classroom.
                        </span>
                        <span class="title-detail mt-2"><b>
                                Virtual Instructor-Led Training(vILT)</b> - Virtual instrutor-Led Training(vILT)is
                            delivered remotely</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-sm-5 float-right">
            <div class="page-header float-right bg-transparent">
                <div class="page-title d-flex end_just">
                    <ol class="breadcrumb text-right bg-transparent">
                        <li>
                            <a [routerLink]="['/dashboard']">
                                <i class="fa fa-home color-blue"></i>
                            </a>
                        </li>
                        <li>
                            <a [routerLink]="['/dashboard']" class="color-orange">Dashboard</a>
                        </li>
                        <li>
                            <a [routerLink]="['/dashboard/olcarousel']" class="color-orange">Create new Carousel</a>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="content mt-3">
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header cm-card-header">
                            <div class="d-flex justify-content-between media_creat_couse_col">
                                <div class="d-flex align-items-center">
                                    <img src="../../../../assets/images/formm.png" class="ml-2" width="40" />
                                    <span class="comlte_css">Complete this form and click on the submit button</span>
                                </div>
                                <a class="float-right view_overall" data-toggle="collapse" href="#collapseExample"
                                    role="button" aria-expanded="false" aria-controls="collapseExample">
                                    View overall request status<img src="../../../../assets/images/Viewreq.png"
                                        class="ml-2" width="40" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <form [formGroup]="createOlcarouselForm">
        <div class="content mt-1">
            <div class="animated fadeIn">
                <div class="row">
                    <div class="col-md-12">
                        <span class="indicate_css"><span class="text-danger-ligth">*</span> Indicates required
                            field</span>
                        <div class="card">
                            <div class="card-header">
                                <div class="header_div_promt">
                                    <strong class="font-13">I want my entry to appear in the following Carousel(s).
                                        ({{languageText}})</strong>
                                    <div class="chkbox_css_header">
                                        <label formArrayName="languages"
                                            *ngFor="let language of lauguageFormArray.controls; let i = index"
                                            (change)="languageChange()">
                                            <input type="checkbox" [formControlName]="i">
                                            <span class="mr-1 ml-1">{{languageList[i].name}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body card_width" formArrayName="metadata">
                                <div class="card_dis_promte col-md-6 col-sm-12"
                                    *ngFor="let carousel of carouselFormArray.controls; let i = index">
                                    <div class="card" [formGroupName]="i">
                                        <div class="card-header">
                                            <div class="header_div_promt">
                                                <strong class="font-13">{{carousel.value.languageName}}</strong>
                                                <div class="chkbox_css_header">
                                                    <button class="btn btn-secondary"
                                                        (click)="removeCarousel(carousel)">Remove Carousel</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body card_width">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="form-group">
                                                        <label class="form-control-label">
                                                            Title <span class="text-danger-ligth">* </span>
                                                            <a>
                                                                <i class="fa fa-info-circle info_circle"
                                                                    aria-hidden="true" data-bs-toggle="tooltip"
                                                                    data-bs-placement="top"
                                                                    title="Provide an attractive, catchy and clear title for the Carousel entry (maximum 32 characters including spaces). "></i>
                                                            </a>
                                                        </label>
                                                        <input type="text" placeholder="Enter Title"
                                                            formControlName="title" class="form-control form_width" />
                                                        <div
                                                            *ngIf="(carouselFormArray.controls[i].controls['title'].invalid && (carouselFormArray.controls[i].controls['title'].dirty || carouselFormArray.controls[i].controls['title'].touched)) || isSubmitted ">
                                                            <div class="error_message"
                                                                *ngIf="carouselFormArray.controls[i].controls['title'].errors?.required">
                                                                Title cannot be blank
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="form-group">
                                                        <label class="form-control-label">
                                                            Description <span class="text-danger-ligth">* </span>
                                                            <a>
                                                                <i class="fa fa-info-circle info_circle"
                                                                    aria-hidden="true" data-bs-toggle="tooltip"
                                                                    data-bs-placement="top"
                                                                    title="Provide 1-2 meaningful sentences describing the content of the Carousel entry (maximum 211 characters including spaces)."></i>
                                                            </a>
                                                        </label>
                                                        <textarea class="form-control form_width-textarea"
                                                            formControlName="description" maxlength="500" rows="3"
                                                            placeholder="Enter Description"></textarea>
                                                        <div
                                                            *ngIf="(carouselFormArray.controls[i].controls['description'].invalid && (carouselFormArray.controls[i].controls['description'].dirty || carouselFormArray.controls[i].controls['description'].touched)) || isSubmitted ">
                                                            <div class="error_message"
                                                                *ngIf="carouselFormArray.controls[i].controls['description'].errors?.required">
                                                                Description cannot be blank
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="form-group">
                                                        <label class="form-control-label">
                                                            Link <span class="text-danger-ligth">* </span>
                                                            <a>
                                                                <i class="fa fa-info-circle info_circle"
                                                                    aria-hidden="true" data-bs-toggle="tooltip"
                                                                    data-bs-placement="top"
                                                                    title="Provide the link of the learning object to which the Carousel entry points."></i>
                                                            </a>
                                                        </label>
                                                        <input type="url" placeholder="Enter Link"
                                                            formControlName="link" class="form-control form_width" />
                                                        <div
                                                            *ngIf="(carouselFormArray.controls[i].controls['link'].invalid && (carouselFormArray.controls[i].controls['link'].dirty || carouselFormArray.controls[i].controls['link'].touched)) || isSubmitted ">
                                                            <div class="error_message"
                                                                *ngIf="carouselFormArray.controls[i].controls['link'].errors?.required">
                                                                Link cannot be blank
                                                            </div>
                                                            <div class="error_message"
                                                                *ngIf="carouselFormArray.controls[i].controls['link'].errors?.pattern">
                                                                Link invalid
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="form-group mb-0">
                                                        <label class="ml-1 manage-checkbox">
                                                            <input type="checkbox" formControlName="display_manager"
                                                                class="mr-1">I want my Carousel to be displayed to
                                                            Managers only</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="header_div_promt">
                                    <strong class="font-13">Other Details</strong>
                                </div>
                            </div>
                            <div class="card-body card_width">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Images <span class="text-danger-ligth">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                                        title="If possible , provide an image with the following ideal dimensions: 550 x 900. Alternatively, provide a raw image that you wish to display in the Carousel and the PD&L team will help you to crop it to a proper size. Note: Please avoid including text in your image."></i>
                                                </a>
                                            </label>
                                            <input type="file" id="carouselImage" class="form-control form_width"
                                                formControlName="image" (change)="handleFileInput($event)" />
                                            <div
                                                *ngIf="(createOlcarouselForm.controls['image'].invalid && (createOlcarouselForm.controls['image'].dirty || createOlcarouselForm.controls['image'].touched)) || isSubmitted">
                                                <div class="error_message"
                                                    *ngIf="createOlcarouselForm.controls['image'].errors?.required">
                                                    Image cannot be blank
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Requested Publication Date <span class="text-danger-ligth">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                                        title="Upon receipt of a correctly completed request, the entry will appear in the Orange Learning Carousel within 3-5 business days."></i>
                                                </a>
                                            </label>
                                            <input type="date" class="form-control form_width"
                                                formControlName="publication_date" />
                                            <div
                                                *ngIf="(createOlcarouselForm.controls['publication_date'].invalid && (createOlcarouselForm.controls['publication_date'].dirty || createOlcarouselForm.controls['publication_date'].touched)) || isSubmitted">
                                                <div class="error_message"
                                                    *ngIf="createOlcarouselForm.controls['publication_date'].errors?.required">
                                                    Requested Publication Date cannot be blank
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Expiry Type <span class="text-danger-ligth">* </span>
                                                <a>
                                                    <i class="fa fa-info-circle info_circle" aria-hidden="true"
                                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                                        title="Provide the date on which this entry should be removed from the Orange Learning Carousel. If the Expiry Date is unknown, the entry will be available in the Carousel for a maximum of 3 months."></i>
                                                </a>
                                            </label>
                                            <select class="form-control form_width" formControlName="expiry_date">
                                                <option value="">Please Select expiry</option>
                                                <option *ngFor="let cctExpiry of cctExpiryperiod"
                                                    [value]="cctExpiry.id">
                                                    {{ cctExpiry.name }}
                                                </option>
                                            </select>
                                            <div
                                                *ngIf="(createOlcarouselForm.controls['expiry_date'].invalid && (createOlcarouselForm.controls['expiry_date'].dirty || createOlcarouselForm.controls['expiry_date'].touched)) || isSubmitted">
                                                <div class="error_message"
                                                    *ngIf="createOlcarouselForm.controls['expiry_date'].errors?.required">
                                                    Expiry Type cannot be blank
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="form-control-label">
                                                Additional Comments <span class="text-danger-ligth">* </span>
                                            </label>
                                            <textarea class="form-control form_width-textarea" maxlength="500" rows="3"
                                                formControlName="additional_comment"
                                                placeholder="Enter Additional Comments"></textarea>
                                            <div
                                                *ngIf="(createOlcarouselForm.controls['additional_comment'].invalid && (createOlcarouselForm.controls['additional_comment'].dirty || createOlcarouselForm.controls['additional_comment'].touched)) || isSubmitted ">
                                                <div class="error_message"
                                                    *ngIf="createOlcarouselForm.controls['additional_comment'].errors?.required">
                                                    Additional Comments cannot be blank
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-primary" type="submit"
                                    (click)="saveCarousel('pending')">Submit</button>
                                <button class="btn btn-secondary mr-1" (click)="saveCarousel('draft')">
                                    Save as draft
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- .content -->
    <div class="collapse" id="collapseExample">
        <div class="card card-body req_status-card">
            <div class="card_header reqst_header">
                <p>Overall request Status</p>
                <i class="fa fa-times fa_cross mr-2" aria-hidden="true" data-toggle="collapse" href="#collapseExample"
                    role="button" aria-expanded="false" aria-controls="collapseExample"></i>
            </div>
            <div class="row ml-1 mr-1" data-aos="fade-right">
                <div class="col-sm-2 dash_wid">
                    <div class="alig_dashicon">
                        <div class="child_align_icon">
                            <div class="fa-icons-des bg-transparent">
                                <img src="../../../../assets/images/icon/draftsbl.png" />
                            </div>
                            <p>Draft</p>
                            <span class="number_css">
                                {{carousel_count.draft}}
                            </span>
                        </div>
                    </div>
                </div>
                <!--coled-->
                <div class="col-sm-2 dash_wid">
                    <div class="alig_dashicon">
                        <div class="child_align_icon">
                            <div class="fa-icons-des bg-transparent">
                                <img src="../../../../assets/images/icon/closedbl.png" />
                            </div>
                            <p>Submitted</p>
                            <span class="number_css">
                                {{carousel_count.submitted}}
                            </span>
                        </div>
                    </div>
                </div>
                <!--coled-->
                <div class="col-sm-2 dash_wid">
                    <div class="alig_dashicon">
                        <div class="child_align_icon">
                            <div class="fa-icons-des bg-transparent">
                                <img src="../../../../assets/images/icon/checkbl.png" />
                            </div>
                            <p>In Active Learning</p>
                            <span class="number_css">
                                {{carousel_count.pending}}
                            </span>
                        </div>
                    </div>
                </div>
                <!--coled-->
                <div class="col-sm-2 dash_wid">
                    <div class="alig_dashicon">
                        <div class="child_align_icon">
                            <div class="fa-icons-des bg-transparent">
                                <img src="../../../../assets/images/icon/rejectbl.png" />
                            </div>
                            <p>Rejected</p>
                            <span class="number_css">
                                {{carousel_count.rejected}}
                            </span>
                        </div>
                    </div>
                </div>
                <!--coled-->
                <div class="col-sm-2 dash_wid">
                    <div class="alig_dashicon">
                        <div class="child_align_icon">
                            <div class="fa-icons-des bg-transparent">
                                <img src="../../../../assets/images/icon/expiredbl.png" />
                            </div>
                            <p>Expired</p>
                            <span class="number_css">
                                {{carousel_count.closed}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <!--ROW END-->
            <div class="view-comple-req_div">
                <button class="btn btn-primary view-comple-req justify-content-center p-1"
                    [routerLink]="['/dashboard/cources/view-complete-report']">
                    <i class="fa fa-database mr-1" aria-hidden="true"></i>View Complete Request
                </button>
            </div>
            <!--ROW END-->
        </div>
    </div>
</div>
<!--end-->