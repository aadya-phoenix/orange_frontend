<div id="right-panel" class="right-panel">
    <app-header></app-header>
    <div class="breadcrumbs cm_breadcums">
        <div class="col-sm-8">
            <div class="page-header float-left">
                <div class="page-title d-flex align-items-center">
                    <img src="../../../../assets/images/first.jpg" class="home_Css_img" />
                    <div class="d-flex flex-column ml-3">
                        <span class="breade_text_span1">{{lableConstant.digital_learning_needs_analysis}}</span>
                        <span class="divider"></span>
                        <span class="breade_text_span">{{lableConstant.dna_tool_feature}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4 float-right">
            <div class="page-header float-right">
                <div class="page-title d-flex end_just">
                    <ol class="breadcrumb text-right">
                        <li>
                            <a [routerLink]="['/']" class="text_white">
                                <i class="fa fa-home" aria-colcount=""></i> {{lableConstant.home}}
                            </a>
                        </li>
                        <li>
                            <a [routerLink]="['/dna']" class="text_white span_dis">{{lableConstant.dna}}</a>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="content mt-1" *ngIf="!isManager">
        <div class="animated fadeIn">
    <ngb-alert [dismissible]="false"  type="warning" class="d-block m-3">
        <span>The DNA tool can be only accessible to a manager who has direct reporting of the employee.</span>
        <p class="mb-0">Please contact to administrator of this site for more details.</p>
</ngb-alert>
        </div></div>
    <div class="content mt-1" *ngIf="isManager">
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="w_100 d-flex">
                                <div class="mr-3">
                                    <div class="mt_66">
                                        <div class="top_circle">

                                        </div>
                                        <div class="line_hieght">
                                        </div>

                                        <div class="top_circle mt_26_minus">

                                        </div>
                                        <div class="line_hieght respo_sec_linehei">
                                        </div>
                                        <div class="top_circle mt_26_minus">

                                        </div>
                                        <div class="line_hieght height_108">
                                        </div>

                                    </div>


                                </div>
                                <div class="w-100">
                                    <div class="row mb-2">
                                        <div class="col-sm-3">
                                            <label class="label_course">Trackers</label>
                                            <select class="form-control  form_width"
                                                (change)="getTracker($event.target.value)">
                                                <option selected='selected' value=''></option>
                                                <option *ngFor="let item of trackerObj" [value]="item.id">
                                                    {{item.title}}</option>
                                            </select>
                                        </div>
                                        <!--colend-->
                                    </div>
                                    <ng-container *ngIf="!isFrance">
                                        <div class="card">
                                            <div class="card-header">
                                                <p class="mb-0 font-13">Regional Operation Manager</p>
                                                <div class="form-group filter_course mr-1">


                                                </div>
                                            </div>
                                            <div class="card-body pa_4_0">

                                                <div class="Course_icon_parent">
                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-all">
                                                                    <img
                                                                        src="../../../../assets/images/icon/viewall.png" />
                                                                </div>

                                                                <p>Total Requests</p>
                                                            </div>
                                                            <span
                                                                class="number_css tot_left">{{rom_count.total?rom_count.total:0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des bac_yellow">
                                                                    <img
                                                                        src="../../../../assets/images/icon/pending.png" />
                                                                </div>
                                                                <p>{{lableConstant.pending}}</p>
                                                            </div>
                                                            <span
                                                                class="number_css">{{rom_count.pending?rom_count.pending:0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-learning">
                                                                    <img
                                                                        src="../../../../assets/images/icon/check.png" />
                                                                </div>
                                                                <p>Closed</p>
                                                            </div>
                                                            <span
                                                                class="number_css">{{rom_count.close?rom_count.close:0}}</span>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header">
                                                <p class="mb-0 font-13">Business Consultant</p>
                                            </div>
                                            <div class="card-body pa_4_0">
                                                <div class="Course_icon_parent">

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-all">
                                                                    <img
                                                                        src="../../../../assets/images/icon/viewall.png" />
                                                                </div>

                                                                <p>Total Requests</p>
                                                            </div>
                                                            <span
                                                                class="number_css tot_left">{{business_consultant_count.total
                                                                ? business_consultant_count.total : 0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des bac_yellow">
                                                                    <img
                                                                        src="../../../../assets/images/icon/pending.png" />
                                                                </div>
                                                                <p>{{lableConstant.pending}}</p>
                                                            </div>
                                                            <span
                                                                class="number_css ">{{business_consultant_count.pending
                                                                ? business_consultant_count.pending : 0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des bac_red">
                                                                    <img
                                                                        src="../../../../assets/images/icon/transfer.png" />
                                                                </div>
                                                                <p>{{lableConstant.forwarded}}</p>
                                                            </div>
                                                            <span
                                                                class="number_css for_left">{{business_consultant_count.forwarded
                                                                ? business_consultant_count.forwarded : 0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-reject">
                                                                    <img
                                                                        src="../../../../assets/images/icon/group.png" />
                                                                </div>
                                                                <p>Total No Of Participants</p>
                                                            </div>
                                                            <span class="number_css tot_left_pa">{{
                                                                business_consultant_count.total_participant ?
                                                                business_consultant_count.total_participant : 0
                                                                }}</span>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header">
                                                <p class="mb-0 font-13">Strategic level</p>
                                            </div>
                                            <div class="card-body pa_4_0">
                                                <div class="Course_icon_parent">

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-all_grey">
                                                                    <i class="fa fa-bell-o bell_icon_dna"></i>
                                                                </div>
                                                                <p>Strategic for BU</p>
                                                            </div>
                                                            <span
                                                                class="number_css sta_left top_2">{{strategic_count.strategic_1
                                                                ? strategic_count.strategic_1 : 0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-all_grey">
                                                                    <i class="fa fa-bell-o bell_icon_dna"></i>
                                                                </div>

                                                                <p>Not Strategic but action required</p>
                                                            </div>
                                                            <span
                                                                class="number_css no_str_b_left top_2">{{strategic_count.strategic_2
                                                                ? strategic_count.strategic_2 : 0}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="Course_icon_child">
                                                        <div class="alig_dashicon">
                                                            <div class="sub-child-dashicon">
                                                                <div class="fa-icons-des cm-all_grey">
                                                                    <i class="fa fa-bell-o bell_icon_dna"></i>
                                                                </div>

                                                                <p>Not a priority or no action required</p>
                                                            </div>
                                                            <span
                                                                class="number_css no_str_b1_left top_2">{{strategic_count.strategic_3
                                                                ? strategic_count.strategic_3 : 0}}</span>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                      <ng-container *ngIf="isFrance">
                        <div class="card">
                            <div class="card-header">
                                <p class="mb-0 font-13">Domain Training</p>
                                <div class="form-group filter_course mr-1" >   
                                </div>
                            </div>
                            <div class="card-body pa_4_0">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child" >
                                             <div class="alig_dashicon">
                                                 <div class="sub-child-dashicon">
                                                     <div class="fa-icons-des bac_yellow">
                                                         <img src="../../../../assets/images/icon/pending.png" />
                                                     </div>
                                                     <p>{{lableConstant.pending}}</p>
                                                 </div>
                                                 <span
                                                     class="number_css">{{domain_training.pending?domain_training.pending:0}}</span>
                                             </div>
                                         </div>
                                         </div>
                                         <div class="col-sm-3">
                                            <div class="Course_icon_child">
                                                <div class="alig_dashicon" >
                                                    <div class="sub-child-dashicon">
                                                        <div class="fa-icons-des cm-learning">
                                                            <img src="../../../../assets/images/icon/check.png" />
                                                        </div>
                                                        <p>Requests Closed</p>
                                                    </div>
                                                    <span
                                                        class="number_css">{{domain_training.close?domain_training.close:0}}</span>
                                                </div>
                                            </div>
                                         </div>
                                  <div class="col-sm-3">
                                    <div class="Course_icon_child">
                                        <div class="alig_dashicon">
                                            <div class="sub-child-dashicon">
                                                <div class="fa-icons-des cm-all">
                                                    <img src="../../../../assets/images/icon/viewall.png" />
                                                </div>
    
                                                <p>Total Requests</p>
                                            </div>
                                            <span class="number_css tot_left">{{domain_training.total?domain_training.total:0}}</span>
                                        </div>
                                    </div>
                                   </div>
                                   <div class="col-sm-3">
                                    <div class="Course_icon_child">
                                        <div class="alig_dashicon">
                                            <div class="sub-child-dashicon">
                                                <div class="fa-icons-des cm-reject">
                                                    <img src="../../../../assets/images/icon/group.png" />
                                                </div>
                                                <p>Total No Of Participants</p>
                                            </div>
                                            <span
                                                class="number_css tot_left_pa">{{ domain_training.total_participant ? domain_training.total_participant : 0 }}</span>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <p class="mb-0 font-13">Domain Wise</p>
                            </div>
                            <div class="card-body pa_4_0">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon" >
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-all">
                                                        <img src="../../../../assets/images/icon/viewall.png" />
                                                    </div>
        
                                                    <p>Cloud</p>
                                                </div>
                                                <span class="number_css tot_left">{{domain_wise_count['Cloud']}}</span>
                                            </div>
                                        </div>
                                    </div>
                                   <div class="col-sm-3">
                                        <div class="Course_icon_child" >
                                            <div class="alig_dashicon" >
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des bac_yellow">
                                                        <img src="../../../../assets/images/icon/pending.png" />
                                                    </div>
                                                    <p>Compétences B2B</p>
                                                </div>
                                                <span
                                                    class="number_css ">
                                                    {{domain_wise_count['Compétences B2B']}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child" >
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des bac_red">
                                                        <img src="../../../../assets/images/icon/transfer.png" />
                                                    </div>
                                                    <p>Compétences managériales</p>
                                                </div>
                                                <span
                                                    class="number_css for_left"> {{domain_wise_count['Compétences managériales']}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-reject">
                                                        <img src="../../../../assets/images/icon/group.png" />
                                                    </div>
                                                    <p>Compétences transverses</p>
                                                </div>
                                                <span
                                                    class="number_css tot_left_pa">
                                                    {{                                       domain_wise_count['Compétences transverses'] }}</span>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-reject">
                                                        <img src="../../../../assets/images/icon/group.png" />
                                                    </div>
                                                    <p>Cyber sécurité</p>
                                                </div>
                                                <span
                                                    class="number_css tot_left_pa">
                                                    {{                                       domain_wise_count['Cyber sécurité'] }}</span>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-reject">
                                                        <img src="../../../../assets/images/icon/group.png" />
                                                    </div>
                                                    <p>Data Analyse & AI</p>
                                                </div>
                                                <span
                                                    class="number_css tot_left_pa">
                                                    {{                                       domain_wise_count['Data Analyse & AI'] }}</span>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-reject">
                                                        <img src="../../../../assets/images/icon/group.png" />
                                                    </div>
                                                    <p>Software & API</p>
                                                </div>
                                                <span
                                                    class="number_css tot_left_pa">
                                                    {{                                       domain_wise_count['Software & API'] }}</span>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="col-sm-3">
                                        <div class="Course_icon_child">
                                            <div class="alig_dashicon">
                                                <div class="sub-child-dashicon">
                                                    <div class="fa-icons-des cm-reject">
                                                        <img src="../../../../assets/images/icon/group.png" />
                                                    </div>
                                                    <p>Virtualisation / SDN</p>
                                                </div>
                                                <span
                                                    class="number_css tot_left_pa">
                                                    {{                                       domain_wise_count['Virtualisation / SDN'] }}</span>
                                            </div>
                                        </div>
                                    </div> 
                                </div>
                            </div>
                        </div>
                       </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--card-->
                </div>
            </div>
        </div>
    </div>
    <div class="content mt-1" *ngIf="isManager" style="overflow-x:hidden;">
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-end mb-1 mt-1">
                                <button class="btn btn-primary mr-1 fon_12"
                                    (click)="exportExcel()"><i class="fa fa-download mr-1"
                                        aria-hidden="true"></i>{{lableConstant.Export}}</button>
                              </div>
                            <div class="table-responsive table_height_scroll">
                                <table id="bootstrap-data-table-export " class="table table-striped table-bordered"  style="table-layout: fixed;">
                                    <thead class="sticky_header">
                                        <tr class="text-center font-13">
                                            <th sortable="request_id">
                                                Orange Learning Training Name
                                            </th>
                                            <th sortable="user_name">
                                                {{lableConstant.Learning_Type}}
                                            </th>
                                            <th sortable="request_id">
                                                Training Provider
                                            </th>
                                            <th sortable="request_id">
                                                Training Contact
                                            </th>
                                            <th sortable="request_id">
                                                {{lableConstant.created_by}}
                                            </th>
                                            <th sortable="request_id">
                                                Source of Training
                                            </th>
                                            <th sortable="last_name">
                                                No. of Participants
                                            </th>
                                            <th sortable="request_id">
                                                Priority
                                            </th>
                                            <th sortable="request_id">
                                                Region of Training
                                            </th>
                                            <th sortable="request_id" *ngIf="!isFrance">
                                                Country of Training
                                            </th>
                                            <th sortable="request_id" *ngIf="isFrance">
                                                Location of Training
                                            </th>
                                            <th sortable="request_id" *ngIf="!isFrance">
                                                {{lableConstant.Management_Code}}
                                            </th>
                                            <th sortable="request_id">
                                                {{lableConstant.Business_Unit}}
                                            </th>
                                            <th sortable="request_id">
                                                Other Business Unit/ M1 Level
                                            </th>
                                            <th class="text-center">Manager</th>
                                            <th class="text-center" *ngIf="!isFrance">Business Conultant</th>
                                            <th class="text-center" *ngIf="!isFrance">Business Conultant Status</th>
                                            <th sortable="first_name" *ngIf="!isFrance">
                                               {{ lableConstant.Comments}}
                                            </th>
                                            <th sortable="created_at" *ngIf="!isFrance">
                                                ROM
                                            </th>
                                            <th class="text-center">{{lableConstant.created_date}}</th>
                                            <th class="text-center" *ngIf="isFrance">Domain Training</th>
                                            <th class="text-center">{{lableConstant.Status}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of learningListToShow | filter: searchText  | paginate: { itemsPerPage: pagination.pageSize, currentPage: pagination.pageNumber } ; let i = index;"
                                            class="text-center bac_hover-table font-12">
                                            <td>{{item?.title}}</td>
                                            <td>{{item?.training_type}}</td>
                                            <td>{{item?.training_provider}}</td>
                                            <td>{{item?.learning_training_data?.training_contact}}</td>
                                            <td>{{item?.learning_training_data?.created_by}}</td>
                                            <td>{{item.training_provider == 'Orange Business Services' ?'Orange
                                                Learning' : 'Other Learning'}}</td>
                                            <td>{{item.number_of_participant}}</td>
                                            <td>{{item.priority_name}}</td>
                                            <td>{{item.region_name}}</td>
                                            <td *ngIf="isFrance">{{item.location}}</td>
                                            <td *ngIf="!isFrance">{{item.country}}</td>
                                            <td *ngIf="!isFrance">{{item.management_code}}</td>
                                            <td>{{item.business_unit_name}}</td>
                                            <td></td>
                                            <td>{{item.requester_email}}</td>
                                            <td *ngIf="!isFrance"></td>
                                            <td *ngIf="!isFrance">{{item.strategic_name}}</td>
                                            <td *ngIf="!isFrance">{{item.comments}}</td>
                                            <td *ngIf="!isFrance">{{item.rom_name}}</td>
                                            <td>{{item.created_at | date: dateFormate}}</td>
                                            <td *ngIf="isFrance">{{item.domain_training_name}}</td>
                                            <td><span [ngClass]="item.status_show">{{item.status_show | titlecase}}
                                                </span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!--card-->
                </div>
            </div>
        </div>
    </div>
</div>